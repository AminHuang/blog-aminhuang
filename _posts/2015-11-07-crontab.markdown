---
layout: post
title:  "crontab 定时任务"
date:   2015-07-11 19:17:00
---
html代码:
{% highlight html %}
{% endhighlight %}



# 命令格式
{% highlight %}
crontab [-u user] [ -e | -l | -r ]
{% endhighlight %}


#命令参数

-u user：用来设定某个用户的crontab服务；
file：file是命令文件的名字,表示将file做为crontab的任务列表文件并载入crontab。如果在命令行中没有指定这个文件，crontab命令将接受标准输入（键盘）上键入的命令，并将它们载入crontab。
-e：编辑某个用户的crontab文件内容。如果不指定用户，则表示编辑当前用户的crontab文件。
-l：显示某个用户的crontab文件内容，如果不指定用户，则表示显示当前用户的crontab文件内容。
-r：从/var/spool/cron目录中删除某个用户的crontab文件，如果不指定用户，则默认删除当前用户的crontab文件。
-i：在删除用户的crontab文件时给确认提示。


#crontab的文件格式

分 时 日 月 星期 要运行的命令
第1列分钟1～59
第2列小时1～23（0表示子夜）
第3列日1～31
第4列月1～12
第5列星期0～6（0表示星期天）
第6列要运行的命令

#使用实例

实例1：每1分钟执行一次myCommand
{% highlight %}
* * * * * myCommand
{% endhighlight %}

实例2：每小时的第3和第15分钟执行
{% highlight %}
3,15 * * * * myCommand
{% endhighlight %}

实例3：在上午8点到11点的第3和第15分钟执行
{% highlight %}
3,15 8-11 * * * myCommand
{% endhighlight %}

实例4：每隔两天的上午8点到11点的第3和第15分钟执行
{% highlight %}
3,15 8-11 */2  *  * myCommand
{% endhighlight %}

实例5：每周一上午8点到11点的第3和第15分钟执行
{% highlight %}
3,15 8-11 * * 1 myCommand
{% endhighlight %}

实例6：每晚的21:30重启smb
{% highlight %}
30 21 * * * /etc/init.d/smb restart
{% endhighlight %}

实例7：每月1、10、22日的4 : 45重启smb
{% highlight %}
45 4 1,10,22 * * /etc/init.d/smb restart
{% endhighlight %}

实例8：每周六、周日的1 : 10重启smb
{% highlight %}
10 1 * * 6,0 /etc/init.d/smb restart
{% endhighlight %}

实例9：每天18 : 00至23 : 00之间每隔30分钟重启smb
{% highlight %}
0,30 18-23 * * * /etc/init.d/smb restart
{% endhighlight %}

实例10：每星期六的晚上11 : 00 pm重启smb
{% highlight %}
0 23 * * 6 /etc/init.d/smb restart
{% endhighlight %}

实例11：每一小时重启smb
{% highlight %}
* */1 * * * /etc/init.d/smb restart
{% endhighlight %}

实例12：晚上11点到早上7点之间，每隔一小时重启smb
{% highlight %}
* 23-7/1 * * * /etc/init.d/smb restart
{% endhighlight %}

为了提交你刚刚创建的crontab文件，可以把这个新创建的文件作为cron命令的参数:
{% highlight %}
$ crontab davecron
{% endhighlight %}

#列出crontab文件

使用-l参数列出crontab文件:
$ crontab -l
0,15,30,45,18-06 * * * /bin/echo `date` > dev/tty1
可以使用这种方法在$HOME目录中对crontab文件做一备份:
$ crontab -l > $HOME/mycron


#编辑crontab文件

如果希望添加、删除或编辑crontab文件中的条目，而EDITOR环境变量又设置为vi，那么就可以用vi来编辑crontab文件:
$ crontab -e


#删除crontab文件

$crontab -r



#自己例子：
{% highlight python %}
# (put your own initials here) echo the date to the console every
# 1 minutes
* * * * * date | tee ~/itilwebapps/aminhuang_test/readme.txt
{% endhighlight %}